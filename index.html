<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚ˆã‚Šã¿ã¡SALON ç¾ã¨ç™’ã—ã®ãƒãƒ«ã‚·ã‚§ | 2026/2/20 - ã‚ªãƒ³ãƒ©ã‚¤ãƒ³äºˆç´„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Hiragino Sans", "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
            line-height: 1.7;
            color: #333;
            background: #fafafa;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #f5e6f0 0%, #e8f5f0 100%);
            padding: 3rem 1.5rem;
            text-align: center;
            border-bottom: 4px solid #d4a5c8;
        }

        .hero h1 {
            font-size: 1.75rem;
            color: #6b4d5e;
            margin-bottom: 1rem;
            line-height: 1.4;
        }

        .hero .catch {
            font-size: 1rem;
            color: #555;
            margin-bottom: 1.5rem;
            font-weight: 500;
        }

        .hero .event-info {
            background: white;
            border-radius: 12px;
            padding: 1.25rem;
            margin: 0 auto;
            max-width: 500px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .hero .event-info p {
            margin: 0.5rem 0;
            font-size: 0.95rem;
        }

        .hero .event-info strong {
            color: #6b4d5e;
        }

        /* Section */
        section {
            max-width: 800px;
            margin: 0 auto;
            padding: 2.5rem 1.5rem;
        }

        section h2 {
            font-size: 1.5rem;
            color: #6b4d5e;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid #d4a5c8;
        }

        /* Staff Cards */
        .staff-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .staff-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            border: 2px solid #f0e6ed;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .staff-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.12);
        }

        .staff-card h3 {
            font-size: 1.25rem;
            color: #6b4d5e;
            margin-bottom: 0.5rem;
        }

        .staff-card .service {
            color: #888;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .staff-card .menu-list {
            font-size: 0.9rem;
            margin: 0.75rem 0;
        }

        .staff-card .menu-item {
            margin: 0.5rem 0;
            padding: 0.5rem;
            background: #fafafa;
            border-radius: 6px;
        }

        .btn-book {
            display: block;
            width: 100%;
            padding: 0.875rem;
            margin-top: 1rem;
            background: linear-gradient(135deg, #d4a5c8 0%, #a8c5d1 100%);
            color: white;
            text-align: center;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: opacity 0.2s, transform 0.2s;
        }

        .btn-book:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 2rem;
            border-radius: 12px;
            max-width: 600px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            max-height: 85vh;
            overflow-y: auto;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover,
        .close:focus {
            color: #000;
        }

        .modal h2 {
            color: #6b4d5e;
            margin-bottom: 1.5rem;
            border-bottom: 3px solid #d4a5c8;
            padding-bottom: 0.5rem;
        }

        /* Time Slots */
        .time-slots {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 0.75rem;
            margin: 1.5rem 0;
        }

        .time-slot {
            padding: 0.75rem;
            border: 2px solid #d4a5c8;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
        }

        .time-slot.available:hover {
            background: #d4a5c8;
            color: white;
            transform: scale(1.05);
        }

        .time-slot.selected {
            background: #6b4d5e;
            color: white;
            border-color: #6b4d5e;
        }

        .time-slot.unavailable {
            background: #f0f0f0;
            color: #999;
            border-color: #ddd;
            cursor: not-allowed;
        }

        /* Form */
        .booking-form {
            margin-top: 2rem;
        }

        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #6b4d5e;
            font-weight: 600;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #d4a5c8;
        }

        .form-group .required {
            color: #e74c3c;
        }

        .btn-submit {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, #6b4d5e 0%, #d4a5c8 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .btn-submit:hover:not(:disabled) {
            opacity: 0.9;
        }

        .btn-submit:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 2rem;
            color: #888;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #d4a5c8;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Success Screen */
        .success-screen {
            text-align: center;
            padding: 2rem;
        }

        .success-screen .icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .success-screen h3 {
            color: #27ae60;
            margin-bottom: 1rem;
        }

        .success-details {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            text-align: left;
        }

        .success-details p {
            margin: 0.5rem 0;
        }

        /* Error */
        .error-message {
            background: #fee;
            border: 2px solid #e74c3c;
            color: #c0392b;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        /* Footer */
        footer {
            background: #6b4d5e;
            color: white;
            padding: 2rem 1.5rem;
            text-align: center;
            margin-top: 3rem;
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 1.5rem;
            }

            .time-slots {
                grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            }
        }
    </style>
</head>
<body>
    <!-- Hero Section -->
    <div class="hero">
        <h1>ã‚ˆã‚Šã¿ã¡SALON<br>ç¾ã¨ç™’ã—ã®ãƒãƒ«ã‚·ã‚§</h1>
        <p class="catch">ãƒãƒƒã‚µãƒ¼ã‚¸ã€ãƒ˜ãƒƒãƒ‰ã‚¹ãƒ‘ã€è€³ã¤ã¼ã‚¸ãƒ¥ã‚¨ãƒªãƒ¼â€¦<br>æ°—ã«ãªã‚‹ã‚¨ã‚¹ãƒ†ã‚’ã¾ã¨ã‚ã¦ä½“é¨“ï¼</p>
        <div class="event-info">
            <p><strong>ğŸ“… æ—¥æ™‚</strong><br>2026å¹´2æœˆ20æ—¥ï¼ˆé‡‘ï¼‰<br>10:30 é–‹å ´ ã€œ 16:30 çµ‚äº†</p>
            <p><strong>ğŸ“ å ´æ‰€</strong><br>åŒ—æœ¬å¸‚æ „å¸‚æ°‘æ´»å‹•äº¤æµã‚»ãƒ³ã‚¿ãƒ¼<br>åŸ¼ç‰çœŒåŒ—æœ¬å¸‚æ „1-1</p>
        </div>
    </div>

    <!-- Booking Section -->
    <section id="booking">
        <h2>ğŸ¯ ã‚ªãƒ³ãƒ©ã‚¤ãƒ³äºˆç´„</h2>
        <p style="margin-bottom: 1.5rem; color: #666;">æ–½è¡“è€…ã‚’é¸ã‚“ã§ã€ã”å¸Œæœ›ã®æ™‚é–“ã‚’ã”äºˆç´„ã„ãŸã ã‘ã¾ã™</p>

        <div class="staff-grid" id="staffGrid">
            <!-- JavaScript ã§å‹•çš„ç”Ÿæˆ -->
        </div>
    </section>

    <!-- Booking Modal -->
    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modalContent">
                <!-- JavaScript ã§å‹•çš„ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p style="margin-top: 2rem; font-size: 0.85rem; opacity: 0.8;">
            Â© 2026 ã‚ˆã‚Šã¿ã¡SALON ç¾ã¨ç™’ã—ã®ãƒãƒ«ã‚·ã‚§
        </p>
    </footer>

    <script>
        // ============================================
        // è¨­å®š
        // ============================================
        const API_BASE_URL = 'https://booking-api-701596593228.asia-northeast1.run.app';

        const STAFF_DATA = [
            {
                id: 'hirao_kazuko',
                name: 'å¹³å°¾å’Œå­',
                service: 'ãƒ‰ãƒ©ã‚¤ãƒ˜ãƒƒãƒ‰',
                menus: [
                    { name: 'ãƒ‰ãƒ©ã‚¤ãƒ˜ãƒƒãƒ‰ã‚¹ãƒ‘', duration: 10, price: 500, note: 'å»¶é•·10åˆ†ã”ã¨ +500å††ï¼ˆå½“æ—¥ç©ºãæ¬¡ç¬¬ï¼‰' },
                    { name: 'è„‡ã»ãã—', duration: 5, price: 500 },
                    { name: 'è¶³è£ãµãã‚‰ã¯ã', duration: 15, price: 1500, note: 'ãƒ›ãƒƒãƒˆã‚¹ãƒˆãƒ¼ãƒ³ä»˜ã' }
                ]
            },
            {
                id: 'hoshino_mika',
                name: 'æ˜Ÿé‡ç¾é¦™',
                service: 'ãƒã‚¤ãƒ«',
                menus: [
                    { name: 'ãƒãƒ³ãƒ‰ãƒãƒƒã‚µãƒ¼ã‚¸', duration: 10, price: 500 },
                    { name: 'ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¸ã‚§ãƒ«ãƒã‚¤ãƒ«', duration: 30, price: 2000 }
                ]
            },
            {
                id: 'matsuoka_sachiyo',
                name: 'æ¾å²¡ä½æ™ºä»£',
                service: 'æ‰‹ç›¸',
                menus: [
                    { name: 'æ‰‹ç›¸é‘‘å®š', duration: 15, price: 500 }
                ]
            },
            {
                id: 'miura_tomoko',
                name: 'ä¸‰æµ¦æ™ºå­',
                service: 'ã‚¨ã‚¹ãƒ†',
                menus: [
                    { name: 'è¡€æµä¿ƒé€²é›»ä½æ²»ç™‚å™¨', duration: 30, price: 500 }
                ]
            },
            {
                id: 'hirao_kasumi',
                name: 'å¹³å°¾å¤ç´”',
                service: 'è€³ã¤ã¼ã‚¸ãƒ¥ã‚¨ãƒªãƒ¼',
                menus: [
                    { name: 'è€³ã¤ã¼ã‚¸ãƒ¥ã‚¨ãƒªãƒ¼', duration: 15, price: 500, note: '2å€‹ 500å††ã€+2å€‹ã”ã¨ +500å††ï¼ˆè¿½åŠ ã¯å½“æ—¥ç©ºãæ¬¡ç¬¬ï¼‰' }
                ]
            }
        ];

        // ============================================
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        // ============================================
        let currentStaff = null;
        let availableSlots = [];
        let selectedSlot = null;
        let selectedMenu = null;

        // ============================================
        // åˆæœŸåŒ–
        // ============================================
        document.addEventListener('DOMContentLoaded', () => {
            renderStaffCards();
            setupModal();
        });

        // ============================================
        // ã‚¹ã‚¿ãƒƒãƒ•ã‚«ãƒ¼ãƒ‰æç”»
        // ============================================
        function renderStaffCards() {
            const grid = document.getElementById('staffGrid');
            grid.innerHTML = '';

            STAFF_DATA.forEach(staff => {
                const card = document.createElement('div');
                card.className = 'staff-card';
                card.onclick = () => openBookingModal(staff);

                const menusHTML = staff.menus.map(menu => `
                    <div class="menu-item">
                        <strong>${menu.name}</strong><br>
                        ${menu.duration}åˆ† ${menu.price}å††
                        ${menu.note ? `<br><small style="color: #888;">${menu.note}</small>` : ''}
                    </div>
                `).join('');

                card.innerHTML = `
                    <h3>${staff.name}</h3>
                    <p class="service">${staff.service}</p>
                    <div class="menu-list">${menusHTML}</div>
                    <button class="btn-book">äºˆç´„ã™ã‚‹</button>
                `;

                grid.appendChild(card);
            });
        }

        // ============================================
        // ãƒ¢ãƒ¼ãƒ€ãƒ«è¨­å®š
        // ============================================
        function setupModal() {
            const modal = document.getElementById('bookingModal');
            const closeBtn = modal.querySelector('.close');

            closeBtn.onclick = () => {
                closeModalWithoutReload();
            };

            window.onclick = (event) => {
                if (event.target === modal) {
                    closeModalWithoutReload();
                }
            };
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹ï¼ˆãƒªãƒ­ãƒ¼ãƒ‰ãªã—ï¼‰
        function closeModalWithoutReload() {
            document.getElementById('bookingModal').style.display = 'none';
            resetBookingState();
            // æ³¨æ„: æ¬¡å›ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ãæ™‚ã«æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã®ã§ã€
            // ã“ã“ã§ã¯ãƒªãƒ­ãƒ¼ãƒ‰ã—ãªã„ï¼ˆUXæ”¹å–„ï¼‰
        }

        // ============================================
        // äºˆç´„ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
        // ============================================
        async function openBookingModal(staff) {
            currentStaff = staff;
            const modal = document.getElementById('bookingModal');
            const content = document.getElementById('modalContent');

            modal.style.display = 'block';
            content.innerHTML = '<div class="loading"><div class="spinner"></div><p>ç©ºãçŠ¶æ³ã‚’èª­ã¿è¾¼ã¿ä¸­...</p></div>';

            try {
                // ç©ºãæ å–å¾—ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥é˜²æ­¢ã®ãŸã‚ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—è¿½åŠ ï¼‰
                const timestamp = new Date().getTime();
                const response = await fetch(`${API_BASE_URL}/api/availability?staff=${staff.id}&date=2026-02-20&_t=${timestamp}`);

                if (!response.ok) {
                    throw new Error('ç©ºãçŠ¶æ³ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }

                const data = await response.json();
                availableSlots = data.available_slots;

                renderBookingForm(staff, data.available_slots);

            } catch (error) {
                console.error('Error fetching availability:', error);
                content.innerHTML = `
                    <div class="error-message">
                        <strong>ã‚¨ãƒ©ãƒ¼</strong><br>
                        ç©ºãçŠ¶æ³ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚<br>
                        ã—ã°ã‚‰ãã—ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚
                    </div>
                `;
            }
        }

        // ============================================
        // äºˆç´„ãƒ•ã‚©ãƒ¼ãƒ æç”»
        // ============================================
        function renderBookingForm(staff, slots) {
            const content = document.getElementById('modalContent');

            const slotsHTML = slots.length > 0
                ? slots.map(slot => `
                    <div class="time-slot available" data-time="${slot}" onclick="selectTimeSlot('${slot}')">
                        ${slot}
                    </div>
                `).join('')
                : '<p style="text-align: center; color: #888;">ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚æœ¬æ—¥ã®äºˆç´„æ ã¯æº€å¸­ã§ã™ã€‚</p>';

            const menusOptions = staff.menus.map((menu, idx) => `
                <option value="${idx}">${menu.name} (${menu.duration}åˆ† ${menu.price}å††)</option>
            `).join('');

            content.innerHTML = `
                <h2>${staff.name}ï¼ˆ${staff.service}ï¼‰ã®äºˆç´„</h2>

                <div class="form-group">
                    <label>ãƒ¡ãƒ‹ãƒ¥ãƒ¼ <span class="required">*</span></label>
                    <select id="menuSelect" onchange="handleMenuChange()"required>
                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                        ${menusOptions}
                    </select>
                </div>

                <div class="form-group">
                    <label>ã”å¸Œæœ›ã®æ™‚é–“ <span class="required">*</span></label>
                    <div class="time-slots" id="timeSlots">
                        ${slotsHTML}
                    </div>
                    <p id="selectedTimeDisplay" style="margin-top: 0.5rem; color: #6b4d5e; font-weight: 600;"></p>
                </div>

                <div class="booking-form">
                    <div class="form-group">
                        <label for="customerName">ãŠåå‰ <span class="required">*</span></label>
                        <input type="text" id="customerName" placeholder="å±±ç”°å¤ªéƒ" required>
                    </div>

                    <div class="form-group">
                        <label for="customerPhone">é›»è©±ç•ªå· <span class="required">*</span></label>
                        <input type="tel" id="customerPhone" placeholder="090-1234-5678" required>
                    </div>

                    <div class="form-group">
                        <label for="customerEmail">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆä»»æ„ï¼‰</label>
                        <input type="email" id="customerEmail" placeholder="example@email.com">
                    </div>

                    <div class="form-group">
                        <label for="customerNote">å‚™è€ƒï¼ˆä»»æ„ï¼‰</label>
                        <textarea id="customerNote" rows="3" placeholder="ã”è¦æœ›ãªã©ã”ã–ã„ã¾ã—ãŸã‚‰ã”è¨˜å…¥ãã ã•ã„"></textarea>
                    </div>

                    <button class="btn-submit" onclick="submitBooking()" id="submitBtn" disabled>
                        äºˆç´„ã‚’ç¢ºå®šã™ã‚‹
                    </button>
                </div>
            `;
        }

        // ============================================
        // ãƒ¡ãƒ‹ãƒ¥ãƒ¼é¸æŠ
        // ============================================
        function handleMenuChange() {
            const select = document.getElementById('menuSelect');
            const menuIndex = parseInt(select.value);

            if (!isNaN(menuIndex)) {
                selectedMenu = currentStaff.menus[menuIndex];
                updateSubmitButton();
            } else {
                selectedMenu = null;
                updateSubmitButton();
            }
        }

        // ============================================
        // æ™‚é–“æ é¸æŠ
        // ============================================
        function selectTimeSlot(time) {
            // æ—¢å­˜ã®é¸æŠã‚’è§£é™¤
            document.querySelectorAll('.time-slot').forEach(slot => {
                slot.classList.remove('selected');
            });

            // æ–°ã—ã„é¸æŠã‚’é©ç”¨
            const slotElement = document.querySelector(`[data-time="${time}"]`);
            slotElement.classList.add('selected');

            selectedSlot = time;

            // è¡¨ç¤ºæ›´æ–°
            document.getElementById('selectedTimeDisplay').textContent = `é¸æŠä¸­: ${time}`;

            updateSubmitButton();
        }

        // ============================================
        // é€ä¿¡ãƒœã‚¿ãƒ³æœ‰åŠ¹åŒ–ãƒã‚§ãƒƒã‚¯
        // ============================================
        function updateSubmitButton() {
            const submitBtn = document.getElementById('submitBtn');
            const name = document.getElementById('customerName').value.trim();
            const phone = document.getElementById('customerPhone').value.trim();

            const isValid = selectedMenu && selectedSlot && name && phone;
            submitBtn.disabled = !isValid;
        }

        // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        document.addEventListener('input', (e) => {
            if (e.target.id === 'customerName' || e.target.id === 'customerPhone') {
                updateSubmitButton();
            }
        });

        // ============================================
        // äºˆç´„é€ä¿¡
        // ============================================
        async function submitBooking() {
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = true;
            submitBtn.textContent = 'äºˆç´„å‡¦ç†ä¸­...';

            const bookingData = {
                staff: currentStaff.id,
                start: `2026-02-20T${selectedSlot}:00`,
                menu: selectedMenu.name,
                name: document.getElementById('customerName').value.trim(),
                phone: document.getElementById('customerPhone').value.trim(),
                email: document.getElementById('customerEmail').value.trim() || null,
                note: document.getElementById('customerNote').value.trim() || null
            };

            try {
                const response = await fetch(`${API_BASE_URL}/api/book`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(bookingData)
                });

                const data = await response.json();

                if (response.ok && data.success) {
                    showSuccessScreen(data.booking);
                } else {
                    throw new Error(data.error || 'äºˆç´„ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }

            } catch (error) {
                console.error('Booking error:', error);
                showErrorScreen(error.message);
            }
        }

        // ============================================
        // æˆåŠŸç”»é¢
        // ============================================
        function showSuccessScreen(booking) {
            const content = document.getElementById('modalContent');
            content.innerHTML = `
                <div class="success-screen">
                    <div class="icon">âœ…</div>
                    <h3>äºˆç´„ãŒå®Œäº†ã—ã¾ã—ãŸï¼</h3>
                    <p>ã”äºˆç´„ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™</p>

                    <div class="success-details">
                        <p><strong>ğŸ“… æ—¥æ™‚</strong><br>${booking.date} ${booking.time}</p>
                        <p><strong>ğŸ‘¤ æ–½è¡“è€…</strong><br>${booking.staff}ï¼ˆ${booking.service}ï¼‰</p>
                        <p><strong>ğŸ’† ãƒ¡ãƒ‹ãƒ¥ãƒ¼</strong><br>${booking.menu}ï¼ˆ${booking.duration}åˆ†ï¼‰</p>
                        <p><strong>ğŸ“ ä¼šå ´</strong><br>${booking.location}</p>
                    </div>

                    <div style="background: #fff9e6; padding: 1rem; border-radius: 8px; font-size: 0.9rem;">
                        <strong>âš ï¸ ã”æ³¨æ„</strong><br>
                        ãƒ»é…åˆ»ã—ãŸå ´åˆã€æ–½è¡“æ™‚é–“ãŒçŸ­ããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™<br>
                        ãƒ»å»¶é•·ã‚„è¿½åŠ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯å½“æ—¥ã®ç©ºãçŠ¶æ³æ¬¡ç¬¬ã§ã”æ¡ˆå†…ã—ã¾ã™<br>
                        ãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã¯ãŠæ—©ã‚ã«ã”é€£çµ¡ãã ã•ã„
                    </div>

                    <p style="margin-top: 1rem; font-size: 0.85rem; color: #666; text-align: center;">
                        äºˆç´„å†…å®¹ã¯Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ç™»éŒ²ã•ã‚Œã¾ã—ãŸ
                    </p>

                    <button class="btn-submit" onclick="closeModal()" style="margin-top: 1rem;">
                        é–‰ã˜ã‚‹
                    </button>
                </div>
            `;
        }

        // ============================================
        // ã‚¨ãƒ©ãƒ¼ç”»é¢
        // ============================================
        function showErrorScreen(message) {
            const content = document.getElementById('modalContent');
            content.innerHTML = `
                <div class="error-message">
                    <strong>âŒ äºˆç´„ã‚¨ãƒ©ãƒ¼</strong><br>
                    ${message}
                </div>
                <button class="btn-submit" onclick="location.reload()" style="margin-top: 1.5rem;">
                    ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿
                </button>
            `;
        }

        // ============================================
        // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
        // ============================================
        function closeModal() {
            document.getElementById('bookingModal').style.display = 'none';
            resetBookingState();
            location.reload(); // æœ€æ–°ã®ç©ºãçŠ¶æ³ã‚’åæ˜ 
        }

        function resetBookingState() {
            currentStaff = null;
            availableSlots = [];
            selectedSlot = null;
            selectedMenu = null;
        }
    </script>
</body>
</html>
